<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ibuildings QA Tools</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://ibuildingsnl.github.io/qa-tools/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://ibuildingsnl.github.io/qa-tools/css/main.css">
</head>
<body>

<main class="container">

            <a href="https://github.com/ibuildingsnl/qa-tools">
            <img style="position: absolute; top: 0; right: 0; border: 0;"
                 src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
                 alt="Fork me on GitHub"
                 data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
        </a>
    
    <div class="row">

        
            <nav id="sidebar" class="col-sm-4 col-lg-3" role="navigation">
                                                                    <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/">
                                    <i class="fa fa-check"></i> Ibuildings QA Tools
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://github.com/ibuildingsnl/qa-tools">
                                    <i class="fa fa-github"></i> GitHub
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/contributing.html">
                                    Contributing guidelines
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development.html">
                                    Development
                                </a>
                                                                                        <ul class="nav nav-pills nav-stacked">
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development/configuration-process.html">
                                    Configuration process
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development/task-development.html">
                                    Task development
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development/tool-development.html">
                                    Tool development
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development/writing-documentation.html">
                                    Writing documentation
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/development/writing-system-tests.html">
                                    Writing system tests
                                </a>
                                                            </li>
                                            </ul>
                
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/phar.html">
                                    Phar
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/release-process.html">
                                    Release process
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/reporting-a-bug.html">
                                    Reporting a bug
                                </a>
                                                            </li>
                                                    <li class="">
                                <a href="https://ibuildingsnl.github.io/qa-tools/docs/ubiquitous-language.html">
                                    Ubiquitous language
                                </a>
                                                            </li>
                                            </ul>
                
            </nav>

        
        <section id="content" class="col-sm-8 col-lg-9">
            <div class="page-header"><h1 id="phar">Phar</h1></div>
<p>The QA Tools are distributed as a PHP Archive (Phar) file in order to separate the QA Tools' dependencies from
the host projects' dependencies. The compiled Phar is also able to verify its
own integrity with the provided public key.</p>
<h2 id="types-of-builds">Types of builds</h2>
<p>There are two types of build: a test build, and a release build. The test build is used
for system testing and is signed using an insecure, ephemeral private key. The
release build is for release to the public, and is signed using a secure private
key managed by Ibuildings.</p>
<p>This serves the following purposes:</p>
<ol>
<li>The test process can be completely automated on the contributor's machine
and on Travis, the automated build server; the private key used for signing
the test build requires no passphrase.</li>
<li>There is no confusion as to with which private key the build is signed. This
prevents a release of a Phar signed with the test key.</li>
</ol>
<h2 id="building-the-phar">Building the Phar</h2>
<p>[Box]<sup id="fnref1:box"><a href="#fn:box" class="footnote-ref">2</a></sup> is used for building the QA Tools Phar file, which is configured in
the <code>box.json</code> file. It is installed as a Phar file itself to prevent version
conflicts between Box' and QA Tools' dependencies.</p>
<p>To enable the writing of Phar files, disable the PHP ini setting <code>phar.readonly</code>
by setting it to <code>Off</code>.</p>
<p>Run <code>make build-test</code> in the project root directory to build the test build.
This creates <code>./build/test/qa-tools.phar</code> and <code>./build/test/qa-tools.phar.pubkey</code>.</p>
<h2 id="updating-box">Updating Box</h2>
<p>Box is installed during Composer's <code>post-install-cmd</code> phase.
To update Box, manually update the source and sha-sum inside <code>composer.json</code> under the <code>extra</code> parameters.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn:box">
<p><a href="https://box-project.github.io/box2/">https://box-project.github.io/box2/</a>&#160;<a href="#fnref1:box" rev="footnote" class="footnote-backref">&#8617;</a></p>
</li>
</ol>
</div>
        </section>

    </div>
</main>

<footer>
    <div class="container-fluid">
        <p class="text-muted">
            website generated with <a href="http://couscous.io" title="Markdown website generator">Couscous</a>
        </p>
    </div>
</footer>

<link rel="stylesheet" href="https://ibuildingsnl.github.io/qa-tools/css/highlight.forest-light.css">
<script src="https://ibuildingsnl.github.io/qa-tools/js/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
